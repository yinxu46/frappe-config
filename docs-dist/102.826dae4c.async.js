(self.webpackChunkfrappe_config=self.webpackChunkfrappe_config||[]).push([[102],{71687:function(){},44102:function(De,X,s){"use strict";s.r(X),s.d(X,{DuoPage:function(){return ae},Foo:function(){return ne},FrappeApiForm:function(){return _},MysqlFieldItem:function(){return L.MysqlFieldItem},MysqlFieldTable:function(){return pe},MysqlFieldTableProps:function(){return L.MysqlFieldTableProps},MysqlFieldTableRef:function(){return L.MysqlFieldTableRef},MysqlFieldType:function(){return L.MysqlFieldType},MysqlFieldTypeOptions:function(){return Y}});var y=s(48658),A=s(92366),e=s(93251),ee=function(d){return(0,e.jsxs)("div",{children:[(0,e.jsx)("h4",{children:d.title}),(0,e.jsx)(A.ZP,{type:"primary",children:"test"})]})},ne=ee,re=s(9083),M=s.n(re),te=function(d){var v=y.useState([{name:"id",type:"int",size:10,key:!0,comment:"ID",nullable:!1}]),x=M()(v,2),u=x[0],h=x[1],f=y.useRef(),j=y.useRef(),t=localStorage.getItem("form"),g=y.useState(t?JSON.parse(t):void 0),i=M()(g,2),l=i[0],o=i[1],E=function(T){o(T),localStorage.setItem("form",JSON.stringify(T))};return(0,e.jsx)("div",{children:(0,e.jsx)(_,{ref:j,defaultValue:l,onFinish:E})})},ae=te,L=s(71687),ie=s(2927),b=s.n(ie),le=s(39346),n=s.n(le),se=s(42525),P=s.n(se),ue=s(8826),p=s(39495),D=s(88631),H=s(10230),R=s(77691),de=s(34237),oe=s(52126),S=s(2741),ce=s(11132),me=s(87307),$=s(13538),xe=s(77727),he=["children"],Y=[{label:"bigint",value:"bigint"},{label:"char",value:"char"},{label:"date",value:"date"},{label:"datetime",value:"datetime"},{label:"decimal",value:"decimal"},{label:"int",value:"int"},{label:"json",value:"json"},{label:"longtext",value:"longtext"},{label:"text",value:"text"},{label:"timestamp",value:"timestamp"},{label:"tinyint",value:"tinyint"},{label:"varchar",value:"varchar"}],je=function(d){var v=d.children,x=P()(d,he),u=(0,$.nB)({id:x["data-row-key"]}),h=u.attributes,f=u.listeners,j=u.setNodeRef,t=u.setActivatorNodeRef,g=u.transform,i=u.transition,l=u.isDragging,o=n()(n()({},x.style),{},{transform:xe.ux.Transform.toString(g&&n()(n()({},g),{},{scaleY:1})),transition:i},l?{position:"relative",zIndex:9999}:{});return(0,e.jsx)("tr",n()(n()(n()({},x),{},{ref:j,style:o},h),{},{children:y.Children.map(v,function(E){return E.key==="sort"?y.cloneElement(E,{children:(0,e.jsx)(de.Z,n()({ref:t,style:{touchAction:"none",cursor:"move"}},f))}):E})}))},ve=function(d,v){var x=d.defaultValue,u=d.onChange,h=y.useState(),f=M()(h,2),j=f[0],t=f[1],g=y.useState((x!=null?x:[]).map(function(F,a){return n()({_key:a+1},F)})),i=M()(g,2),l=i[0],o=i[1],E=function(){var a=Date.now();t(a),o([].concat(b()(l),[{_key:a,name:"",type:"int",nullable:!1,key:!1,comment:""}]))},U=function(a){var c=b()(l);c.splice(a,1),o(c)},T=function(a,c){var m=b()(l);m[c]=a,o(m)},Pe=function(a){var c=a.active,m=a.over;c.id!==(m==null?void 0:m.id)&&o(function(k){var I=k.findIndex(function(K){return K._key===c.id}),B=k.findIndex(function(K){return K._key===(m==null?void 0:m.id)});return(0,$.Rp)(k,I,B)})};return(0,y.useEffect)(function(){u==null||u(l)},[l]),y.useImperativeHandle(v,function(){return{data:l,add:E,remove:U}}),(0,e.jsxs)("div",{children:[(0,e.jsx)(ce.LB,{modifiers:[me.DL],onDragEnd:Pe,children:(0,e.jsx)($.Fo,{items:l.map(function(F){var a;return(a=F._key)!==null&&a!==void 0?a:0}),strategy:$.qw,children:(0,e.jsx)(ue.Z,{onRow:function(a,c){return{onClick:function(){t(a._key)}}},size:"small",pagination:!1,components:{body:{row:je}},rowKey:"_key",dataSource:l,scroll:{x:680,y:400},columns:[{key:"sort",width:30},{dataIndex:"name",title:"\u540D\u79F0",width:100,render:function(a,c,m){return c._key==j?(0,e.jsx)(p.Z,{size:"small",defaultValue:a,onInput:function(I){return T(n()(n()({},c),{},{name:I.currentTarget.value.trim()}),m)}}):a}},{dataIndex:"type",title:"\u7C7B\u578B",width:100,render:function(a,c,m){return c._key==j?(0,e.jsx)(D.Z,{size:"small",defaultValue:a,options:Y,onChange:function(I){return T(n()(n()({},c),{},{type:I}),m)},style:{width:"100%"}}):a}},{dataIndex:"size",title:"\u957F\u5EA6",width:100,render:function(a,c,m){return c._key==j?(0,e.jsx)(H.Z,{size:"small",type:"number",defaultValue:a,min:0,onInput:function(I){return T(n()(n()({},c),{},{size:parseInt(I)}),m)}}):a>0?a:""}},{dataIndex:"digit",title:"\u5C0F\u6570",width:100,render:function(a,c,m){return c._key==j?(0,e.jsx)(H.Z,{size:"small",type:"number",defaultValue:a,min:0,onInput:function(I){return T(n()(n()({},c),{},{digit:parseInt(I)}),m)}}):a>0?a:""}},{dataIndex:"nullable",title:"Nullable",width:60,render:function(a,c,m){return(0,e.jsx)(R.Z,{checked:a,onClick:function(I){var B;return T(n()(n()({},c),{},{nullable:(B=I.target)===null||B===void 0?void 0:B.checked}),m)}})}},{dataIndex:"key",title:"\u952E",width:30,render:function(a,c,m){return(0,e.jsx)(R.Z,{checked:a,onClick:function(I){var B;return T(n()(n()({},c),{},{key:(B=I.target)===null||B===void 0?void 0:B.checked}),m)}})}},{dataIndex:"comment",title:"\u6CE8\u91CA",width:120,render:function(a,c,m){return c._key==j?(0,e.jsx)(p.Z,{size:"small",defaultValue:a,onInput:function(I){return T(n()(n()({},c),{},{comment:I.currentTarget.value.trim()}),m)}}):a}},{width:30,render:function(a,c,m){return(0,e.jsx)(oe.Z,{onClick:function(I){return U(m)}})}}]})})}),(0,e.jsx)(A.ZP,{style:{marginTop:8},block:!0,type:"dashed",icon:(0,e.jsx)(S.Z,{}),onClick:function(a){return E()},children:"\u65B0\u589E\u5B57\u6BB5"})]})},pe=y.forwardRef(ve),r=s(66912),w=s(26713),Z=s(88985),O=s(21576),N=s(83788),z=s(92533),fe=["name","children"],Ze=["name"],W=function(d){return Array.isArray(d)?d:[d]},G=y.createContext([]),V=function(d){var v=d.name,x=d.children,u=P()(d,fe),h=y.useContext(G),f=[].concat(b()(h),b()(W(v)));return(0,e.jsx)(r.Z.List,n()({name:f,children:x},u))},q=function(d){var v=d.name,x=P()(d,Ze),u=y.useContext(G),h=v!==void 0?[].concat(b()(u),b()(W(v))):void 0;return(0,e.jsx)(r.Z.Item,n()({name:h},x))},J=function(d){var v=d.prefix,x=d.children,u=y.useContext(G),h=y.useMemo(function(){return[].concat(b()(u),b()(W(v)))},[u,v]);return(0,e.jsx)(G.Provider,{value:h,children:x})},ye=["key","name"],Fe=["key","name"],ge=["key","name"],Ie=["key","name"],Ce=function(d){var v=d.prefix;return(0,e.jsx)(J,{prefix:v,children:(0,e.jsxs)(w.Z,{gutter:24,children:[(0,e.jsx)(Z.Z,{span:24,children:(0,e.jsx)(q,{name:"tableName",label:"\u6570\u636E\u8868\u540D\u79F0",required:!0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E\u8868\u540D\u79F0"}],children:(0,e.jsx)(p.Z,{maxLength:32})})}),(0,e.jsx)(Z.Z,{span:12,children:(0,e.jsx)(r.Z.Item,{name:"isPaginate",valuePropName:"checked",children:(0,e.jsx)(R.Z,{children:"\u5206\u9875\u67E5\u8BE2"})})}),(0,e.jsx)(Z.Z,{span:12,children:(0,e.jsx)(r.Z.Item,{name:"isTree",valuePropName:"checked",children:(0,e.jsx)(R.Z,{children:"\u8FD4\u56DE\u6811\u7ED3\u6784\u6570\u636E"})})}),(0,e.jsx)(Z.Z,{span:24,children:(0,e.jsx)(r.Z.Item,{children:(0,e.jsx)(O.Z,{size:"small",title:"\u67E5\u8BE2\u6761\u4EF6\u914D\u7F6E",children:(0,e.jsx)(V,{name:"conditions",children:function(u,h){var f=h.add,j=h.remove;return(0,e.jsxs)(e.Fragment,{children:[u.map(function(t){var g=t.key,i=t.name,l=P()(t,ye);return(0,e.jsxs)(N.Z,{style:{display:"flex",marginBottom:8},align:"baseline",children:[(0,e.jsx)(r.Z.Item,n()(n()({},l),{},{name:[i,"name"],rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u540D"}],children:(0,e.jsx)(p.Z,{placeholder:"\u5B57\u6BB5\u540D"})})),(0,e.jsx)(r.Z.Item,n()(n()({},l),{},{name:[i,"raw"],children:(0,e.jsx)(p.Z,{placeholder:"raw"})})),(0,e.jsx)(r.Z.Item,n()(n()({},l),{},{name:[i,"type"],rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u67E5\u8BE2\u65B9\u5F0F"}],children:(0,e.jsx)(D.Z,{placeholder:"\u67E5\u8BE2\u65B9\u5F0F",options:["=",">","<",">=","<=","in","like","left_like","right_like","between","date_range","datetime_range"].map(function(o){return{label:o,value:o}}),style:{width:"100%",minWidth:120}})})),(0,e.jsx)(z.Z,{onClick:function(){return j(i)}})]},g)}),(0,e.jsx)(r.Z.Item,{children:(0,e.jsx)(A.ZP,{type:"dashed",onClick:function(){return f()},block:!0,icon:(0,e.jsx)(S.Z,{}),children:"\u6DFB\u52A0\u6761\u4EF6\u914D\u7F6E"})})]})}})})})}),(0,e.jsx)(Z.Z,{span:24,children:(0,e.jsx)(r.Z.Item,{children:(0,e.jsx)(O.Z,{size:"small",title:"\u67E5\u8BE2\u5B57\u6BB5\u914D\u7F6E",children:(0,e.jsx)(V,{name:"tableFields",children:function(u,h){var f=h.add,j=h.remove;return(0,e.jsxs)(e.Fragment,{children:[u.map(function(t){var g=t.key,i=t.name,l=P()(t,Fe);return(0,e.jsxs)(N.Z,{style:{display:"flex",marginBottom:8},align:"baseline",children:[(0,e.jsx)(r.Z.Item,n()(n()({},l),{},{name:[i,"name"],rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u540D"}],children:(0,e.jsx)(p.Z,{placeholder:"\u5B57\u6BB5\u540D"})})),(0,e.jsx)(r.Z.Item,n()(n()({},l),{},{name:[i,"type"],rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5B57\u6BB5\u7C7B\u578B"}],children:(0,e.jsx)(D.Z,{placeholder:"\u5B57\u6BB5\u7C7B\u578B",options:["int","text","mobile","date","datetime","select"].map(function(o){return{label:o,value:o}}),style:{width:"100%",minWidth:120}})})),(0,e.jsx)(r.Z.Item,n()(n()({},l),{},{name:[i,"label"],children:(0,e.jsx)(p.Z,{placeholder:"\u5B57\u6BB5\u6CE8\u91CA"})})),(0,e.jsx)(r.Z.Item,n()(n()({},l),{},{name:[i,"raw"],children:(0,e.jsx)(p.Z,{placeholder:"Raw"})})),(0,e.jsx)(r.Z.Item,n()(n()({},l),{},{name:[i,"alias"],children:(0,e.jsx)(p.Z,{placeholder:"\u5B57\u6BB5\u522B\u540D"})})),(0,e.jsx)(r.Z.Item,n()(n()({},l),{},{name:[i,"options"],children:(0,e.jsx)(p.Z,{placeholder:"Options"})})),(0,e.jsx)(r.Z.Item,n()(n()({},l),{},{name:[i,"format"],children:(0,e.jsx)(p.Z,{placeholder:"Format"})})),(0,e.jsx)(r.Z.Item,n()(n()({},l),{},{name:[i,"privacy"],valuePropName:"checked",children:(0,e.jsx)(R.Z,{style:{width:60},children:"\u9690\u79C1"})})),(0,e.jsx)(z.Z,{onClick:function(){return j(i)}})]},g)}),(0,e.jsx)(r.Z.Item,{children:(0,e.jsx)(A.ZP,{type:"dashed",onClick:function(){return f()},block:!0,icon:(0,e.jsx)(S.Z,{}),children:"\u6DFB\u52A0\u6761\u4EF6\u914D\u7F6E"})})]})}})})})}),(0,e.jsx)(Z.Z,{span:24,children:(0,e.jsx)(r.Z.Item,{children:(0,e.jsx)(O.Z,{size:"small",title:"\u5173\u8054JOIN\u914D\u7F6E",children:(0,e.jsx)(V,{name:"tableJoins",children:function(u,h){var f=h.add,j=h.remove;return(0,e.jsxs)(e.Fragment,{children:[u.map(function(t){var g=t.key,i=t.name,l=P()(t,ge);return(0,e.jsxs)(N.Z,{style:{display:"flex",marginBottom:8},align:"baseline",children:[(0,e.jsx)(r.Z.Item,n()(n()({},l),{},{name:[i,"name"],rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u540D"}],children:(0,e.jsx)(p.Z,{placeholder:"\u5B57\u6BB5\u540D"})})),(0,e.jsx)(r.Z.Item,n()(n()({},l),{},{name:[i,"condition"],rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6761\u4EF6"}],children:(0,e.jsx)(p.Z,{placeholder:"\u5173\u8054\u6761\u4EF6"})})),(0,e.jsx)(r.Z.Item,n()(n()({},l),{},{name:[i,"type"],rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5173\u8054\u65B9\u5F0F"}],children:(0,e.jsx)(D.Z,{placeholder:"\u5173\u8054\u65B9\u5F0F",options:["left","right","inner"].map(function(o){return{label:o,value:o}}),style:{width:"100%",minWidth:120}})})),(0,e.jsx)(z.Z,{onClick:function(){return j(i)}})]},g)}),(0,e.jsx)(r.Z.Item,{children:(0,e.jsx)(A.ZP,{type:"dashed",onClick:function(){return f()},block:!0,icon:(0,e.jsx)(S.Z,{}),children:"\u6DFB\u52A0\u5173\u8054\u914D\u7F6E"})})]})}})})})}),(0,e.jsx)(Z.Z,{span:24,children:(0,e.jsx)(r.Z.Item,{children:(0,e.jsx)(O.Z,{size:"small",title:"\u9ED8\u8BA4\u6392\u5E8F\u914D\u7F6E",children:(0,e.jsx)(V,{name:"defaultOrder",children:function(u,h){var f=h.add,j=h.remove;return(0,e.jsxs)(e.Fragment,{children:[u.map(function(t){var g=t.key,i=t.name,l=P()(t,Ie);return(0,e.jsxs)(N.Z,{style:{display:"flex",marginBottom:8},align:"baseline",children:[(0,e.jsx)(r.Z.Item,n()(n()({},l),{},{name:[i,"name"],rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u540D"}],children:(0,e.jsx)(p.Z,{placeholder:"\u5B57\u6BB5\u540D"})})),(0,e.jsx)(r.Z.Item,n()(n()({},l),{},{name:[i,"sort"],rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6392\u5E8F\u65B9\u5F0F"}],children:(0,e.jsx)(D.Z,{placeholder:"\u6392\u5E8F\u65B9\u5F0F",options:["asc","desc"].map(function(o){return{label:o,value:o}}),style:{width:"100%",minWidth:120}})})),(0,e.jsx)(z.Z,{onClick:function(){return j(i)}})]},g)}),(0,e.jsx)(r.Z.Item,{children:(0,e.jsx)(A.ZP,{type:"dashed",onClick:function(){return f()},block:!0,icon:(0,e.jsx)(S.Z,{}),children:"\u6DFB\u52A0\u6392\u5E8F\u914D\u7F6E"})})]})}})})})}),(0,e.jsx)(Z.Z,{span:24,children:(0,e.jsx)(q,{name:"tableGroup",label:"\u5206\u7EC4\u67E5\u8BE2\u914D\u7F6E",children:(0,e.jsx)(p.Z,{maxLength:64})})})]})})},Q=Ce,Ee=["key","name"],ke=function(d){var v=d.form,x=d.prefix,u=r.Z.useWatch(["config","type"],v);return(0,e.jsx)(J,{prefix:x,children:(0,e.jsxs)(w.Z,{gutter:24,children:[(0,e.jsx)(Z.Z,{span:12,children:(0,e.jsx)(q,{label:"\u6570\u636E\u6E90\u7C7B\u578B",name:"type",required:!0,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6570\u636E\u6E90"}],children:(0,e.jsx)(D.Z,{options:[{label:"\u9759\u6001",value:"static"},{label:"\u52A8\u6001",value:"dynamic"}],style:{width:"100%"}})})}),u=="static"?(0,e.jsx)(Z.Z,{span:24,children:(0,e.jsx)(r.Z.Item,{children:(0,e.jsx)(O.Z,{size:"small",title:"\u6570\u636E\u6E90\u914D\u7F6E",children:(0,e.jsx)(V,{name:"options",children:function(f,j){var t=j.add,g=j.remove;return(0,e.jsxs)(e.Fragment,{children:[f.map(function(i){var l=i.key,o=i.name,E=P()(i,Ee);return(0,e.jsxs)(N.Z,{style:{display:"flex",marginBottom:8},align:"baseline",children:[(0,e.jsx)(r.Z.Item,n()(n()({},E),{},{name:[o,"label"],rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u663E\u793A\u6807\u7B7E"}],children:(0,e.jsx)(p.Z,{placeholder:"\u663E\u793A\u6807\u7B7E"})})),(0,e.jsx)(r.Z.Item,n()(n()({},E),{},{name:[o,"value"],rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E\u503C"}],children:(0,e.jsx)(p.Z,{placeholder:"\u6570\u636E\u503C"})})),(0,e.jsx)(z.Z,{onClick:function(){return g(o)}})]},l)}),(0,e.jsx)(r.Z.Item,{children:(0,e.jsx)(A.ZP,{type:"dashed",onClick:function(){return t()},block:!0,icon:(0,e.jsx)(S.Z,{}),children:"\u6DFB\u52A0\u6570\u636E"})})]})}})})})}):"",u=="dynamic"?(0,e.jsx)(Z.Z,{span:24,children:(0,e.jsx)(J,{prefix:["config"],children:(0,e.jsx)(Q,{form:v,prefix:[].concat(b()(W(x)),["config"])})})}):""]})})},be=ke,Te=["SELECT","GET","OPTION","SET","CREATE","UPDATE","DELETE","IMPORT","EXPORT","CUSTOM"].map(function(C){return{label:C,value:C}}),Be=function(d,v){var x=d.defaultValue,u=d.onFinish,h=r.Z.useForm(),f=M()(h,1),j=f[0],t=r.Z.useWatch("type",j);return(0,e.jsx)(r.Z,{ref:v,size:"middle",scrollToFirstError:{block:"center"},variant:"filled",form:j,initialValues:x,onFinish:u,layout:"vertical",children:(0,e.jsxs)(w.Z,{gutter:24,children:[(0,e.jsx)(Z.Z,{span:12,children:(0,e.jsx)(r.Z.Item,{label:"API\u540D\u79F0",name:"title",required:!0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165API\u540D\u79F0"}],children:(0,e.jsx)(p.Z,{maxLength:32})})}),(0,e.jsx)(Z.Z,{span:12,children:(0,e.jsx)(r.Z.Item,{label:"API\u7C7B\u578B",name:"type",required:!0,rules:[{required:!0,message:"\u8BF7\u9009\u62E9API\u7C7B\u578B"}],children:(0,e.jsx)(D.Z,{options:Te,style:{width:"100%"}})})}),(0,e.jsx)(Z.Z,{span:12,children:(0,e.jsx)(r.Z.Item,{name:"status",valuePropName:"checked",children:(0,e.jsx)(R.Z,{children:"\u542F\u7528API"})})}),(0,e.jsx)(Z.Z,{span:12,children:(0,e.jsx)(r.Z.Item,{name:"permissions",valuePropName:"checked",children:(0,e.jsx)(R.Z,{children:"\u9700\u8981\u9A8C\u8BC1\u6743\u9650"})})}),(0,e.jsx)(Z.Z,{span:24,children:(0,e.jsx)(r.Z.Item,{label:"\u6CE8\u91CA",name:"comment",children:(0,e.jsx)(p.Z.TextArea,{maxLength:255})})}),(0,e.jsx)(Z.Z,{span:24,children:(0,e.jsx)(r.Z.Item,{label:"API\u914D\u7F6E",children:(0,e.jsxs)(O.Z,{children:[t=="SELECT"?(0,e.jsx)(Q,{form:j,prefix:["config"]}):"",t=="OPTION"?(0,e.jsx)(be,{form:j,prefix:["config"]}):"",t=="GET"?(0,e.jsx)("div",{children:"GET"}):"",t=="SET"?(0,e.jsx)("div",{children:"SET"}):"",t=="CREATE"?(0,e.jsx)("div",{children:"CREATE"}):"",t=="UPDATE"?(0,e.jsx)("div",{children:"UPDATE"}):"",t=="DELETE"?(0,e.jsx)("div",{children:"DELETE"}):"",t=="IMPORT"?(0,e.jsx)("div",{children:"IMPORT"}):"",t=="EXPORT"?(0,e.jsx)("div",{children:"EXPORT"}):"",t=="CUSTOM"?(0,e.jsx)("div",{children:"CUSTOM"}):""]})})}),(0,e.jsx)(Z.Z,{span:24,children:(0,e.jsx)(r.Z.Item,{children:(0,e.jsx)(A.ZP,{block:!0,type:"primary",htmlType:"submit",children:"\u63D0\u4EA4"})})})]})})},Ae=y.forwardRef(Be),_=Ae}}]);
